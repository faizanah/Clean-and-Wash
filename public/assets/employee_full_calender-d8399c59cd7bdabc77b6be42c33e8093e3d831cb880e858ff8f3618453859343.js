function fit_calendar_container_height(){if(neonCalendar2.isPresent)if(neonCalendar2.$sidebar.height()<neonCalendar2.$body.height())neonCalendar2.$sidebar.height(neonCalendar2.$body.height());else{var e=neonCalendar2.$sidebar.height();neonCalendar2.$sidebar.height(""),neonCalendar2.$sidebar.height()<neonCalendar2.$body.height()&&neonCalendar2.$sidebar.height(e)}}function reset_calendar_container_height(){neonCalendar2.isPresent&&neonCalendar2.$sidebar.height("auto")}function calendar_toggle_checkbox_status(e){neonCalendar2.$body.find('table tbody input[type="checkbox"]'+(e?"":":checked")).attr("checked",!e).click()}var neonCalendar2=neonCalendar2||{};!function(e,n){"use strict";e(document).ready(function(){if(neonCalendar2.$container=e(".calendar-env"),e.extend(neonCalendar2,{isPresent:neonCalendar2.$container.length>0}),neonCalendar2.isPresent){neonCalendar2.$sidebar=neonCalendar2.$container.find(".calendar-sidebar"),neonCalendar2.$body=neonCalendar2.$container.find(".calendar-body");var t=neonCalendar2.$body.find('table thead input[type="checkbox"], table tfoot input[type="checkbox"]');if(t.on("click",function(){t.attr("checked",this.checked).trigger("change"),calendar_toggle_checkbox_status(this.checked)}),neonCalendar2.$body.find('table tbody input[type="checkbox"]').on("change",function(){e(this).closest("tr")[this.checked?"addClass":"removeClass"]("highlight")}),e.isFunction(e.fn.fullCalendar)){var a=e("#calendar");a.fullCalendar({header:{left:"title",right:"month,agendaWeek,agendaDay today prev,next"},selectable:!0,selectHelper:!0,editable:!0,eventLimit:!0,events:"/employee/events.json",eventClick:function(t){function a(){e(".fc-popover.click").css({left:o.offset().left+o.outerWidth()/2,top:o.offset().top+o.outerHeight()})}var o=e(this);if(e(this).hasClass("event-clicked")||(e(".fc-event").removeClass("event-clicked"),e(this).addClass("event-clicked")),e("body").append('<button type="button" class="close"><span aria-hidden="true">\xd7</span><span class="sr-only">Close</span></button><div class="fc-popover click"><div class="fc-header"><center>'+t.title+'</center><button type="button" class="cl"><i class="entypo-cancel"></i></button></div><div class="fc-body"><p class="color-blue-grey"> Time:  <strong>'+moment(t.start).format("dddd, D YYYY, hh:mma")+'</strong></p><p class="color-blue-grey"> Customer:  <strong>'+t.customer_name+'</strong></p><p class="color-blue-grey"> Employee:  <strong>'+t.employee_name+"</strong></p>&nbsp;"),e(".fc-event-action-delete").click(function(){e.ajax({url:"/admin/events/"+t.id,type:"DELETE",data:{_method:"DELETE"}})}),e(".fc-popover.click .datetimepicker").datetimepicker({widgetPositioning:{horizontal:"right"}}),e(".fc-popover.click .datetimepicker-2").datetimepicker({widgetPositioning:{horizontal:"right"},format:"LT",debug:!0}),a(),e(".fc-scroller, .calendar-page-content, body").scroll(function(){a()}),e(n).resize(function(){a()}),e(".fc-popover.click").length>1)for(var r=0;r<e(".fc-popover.click").length-1;r++)e(".fc-popover.click").eq(r).remove();e(".fc-popover.click .cl, .fc-popover.click .remove-popover").click(function(){e(".fc-popover.click").remove(),e(".fc-event").removeClass("event-clicked")}),e(".fc-event-action-edit").click(function(n){n.preventDefault(),e(".fc-popover.click .main-screen").hide(),edit_event(t)}),e(".fc-event-action-remove").click(function(n){n.preventDefault(),e(".fc-popover.click .main-screen").hide(),e(".fc-popover.click .remove-confirm").show()})},firstDay:1,height:600,droppable:!0,drop:function(n,t){var o=e(this),r={title:o.text(),start:n,allDay:t,className:o.data("event-class")};a.fullCalendar("renderEvent",r,!0),o.remove()}})}else alert("Please include full-calendar script!");e("body").on("submit","#add_event_form",function(n){n.preventDefault();var t=e("#add_event_form input");if(0==t.val().length)return!1;var a=["","color-green","color-blue","color-orange","color-primary",""],o=a[Math.floor(a.length*Math.random())],r=e('<li><a href="#"></a></li>');return r.find("a").text(t.val()).addClass(o).attr("data-event-class",o),r.appendTo(e("#draggable_events")),e("#draggable_events li a").draggable({zIndex:999,revert:!0,revertDuration:0}).on("click",function(){return!1}),fit_calendar_container_height(),r.hide().slideDown("fast"),t.val(""),!1})}})}(jQuery,window);